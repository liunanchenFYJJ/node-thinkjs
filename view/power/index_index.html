<!-- 内容主体区域 -->
<blockquote class="layui-elem-quote">
    运维总览,整体运维的总视图
</blockquote>
<!-- 利用 vue 实例进行数据绑定 -->
<div class="layui-tab" id="app">
    <ul class="layui-tab-title">
        <li class="layui-this">运维总览</li>
    </ul>
    <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
            <!-- 内容主体 -->
            <div class="layui-row">
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>平台工程总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon" style="font-size: 64px; color: rgb(30, 159, 255);">&#xe62c;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>您的站点:</span>
                                    <span>在线子站:</span>
                                    <span>离线子站:</span>
                                    <span>检修子站:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>指标检测总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon" style="font-size: 64px; color: rgb(30, 159, 255);">&#xe628;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>总指标数:</span>
                                    <span>设备指标数:</span>
                                    <span>运行指标:</span>
                                    <span>异常指标率:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>告警检测总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon" style="font-size: 64px; color: rgb(30, 159, 255);">&#xe645;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>今日告警数:</span>
                                    <span>严重等级:</span>
                                    <span>普通等级:</span>
                                    <span>一般等级:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>待办事项总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon" style="font-size: 64px; color: rgb(30, 159, 255);">&#xe61d;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>近期待办:</span>
                                    <span>紧急等级:</span>
                                    <span>普通等级:</span>
                                    <span>一般等级:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-sm6 layui-col-md8">
                    <fieldset class="layui-elem-field">
                        <legend>平台总流量趋势</legend>
                        <div class="layui-field-box">
                            <div id="total_fuhe_map" style="height: 240px; width: 100%;"></div>
                        </div>
                    </fieldset>
                </div>               
                <div class="layui-col-sm6 layui-col-md4">
                    <fieldset class="layui-elem-field">
                        <legend>站点负荷区间分布(kw)</legend>
                        <div class="layui-field-box">
                            <div id="fuhe_map" style="height: 240px; width: 100%;"></div>
                        </div>
                    </fieldset>
                </div>               
            </div>
            <div class="layui-row">
                <div class="layui-col-sm6 layui-col-md6">
                    <fieldset class="layui-elem-field">
                        <legend>Top 10 用能站点</legend>
                        <div class="layui-field-box">
                            <div id="top_fuhe_map" style="height: 240px; width: 100%;"></div>
                        </div>
                    </fieldset>
                </div>               
                <div class="layui-col-sm6 layui-col-md6">
                    <fieldset class="layui-elem-field">
                        <legend>平台用能趋势(kwh)</legend>
                        <div class="layui-field-box">
                            <div id="top_energy_map" style="height: 240px; width: 100%;"></div>
                        </div>
                    </fieldset>
                </div> 
            </div>
            <div class="layui-row">
                <div class="layui-col-sm12 layui-col-md12">
                    <fieldset class="layui-elem-field">
                        <legend>重点站点服务检测|<a><i class="fa fa-plus-circle"></i></a>添加关注</legend>
                        <div class="layui-field-box">
                            <table class="layui-table">
                                <colgroup>
                                    <col width="150">
                                    <col width="200">
                                    <col>
                                </colgroup>
                                <thead>
                                    <tr>
                                    <th>操作</th>
                                    <th>子站名称</th>
                                    <th>企业名称</th>
                                    <th>所属行业</th>
                                    <th>装机容量(kVA)</th>
                                    <th>当前负荷(kW)</th>
                                    <th>最大负荷(kW)</th>
                                    <th>指标状态</th>
                                    <th>通信状态</th>
                                    </tr> 
                                </thead>
                                <tbody>
                                    <tr>
                                    <td>1</td>
                                    <td>2-11-29</td>
                                    <td>人生就像是一场修行1</td>
                                    <td>人生就像是一场修行2</td>
                                    <td>人生就像是一场修行3</td>
                                    <td>人生就像是一场修行4</td>
                                    <td>人生就像是一场修行5</td>
                                    <td>人生就像是一场修行6</td>
                                    <td>人生就像是一场修行7</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </fieldset>
                </div> 
            </div>                
        </div>
    </div>
</div>
<script>
    (function(){
        // 利用vue进行数据绑定
        var app = new Vue({
            el: '#app',
            data: {
                msg: 'jj'
            }
        });
        // echarts图标初始化
        var myChart = echarts.init(document.getElementById('total_fuhe_map'));
        var myChart1 = echarts.init(document.getElementById('fuhe_map'));        
        // var myChart2 = echarts.init(document.getElementById('top_fuhe_map'));        
        // var myChart3 = echarts.init(document.getElementById('total_energy_map'));        
        var base = +new Date();
        var twoMinutes = 2 * 60 * 1000;
        var date = [];

        var data = [Math.random() * 150];
        var now = new Date(base);
        console.log(now)

        function addData(shift) {
            now = [now.getHours(), now.getMinutes()<10?'0'+now.getMinutes():now.getMinutes()].join(':');
            date.push(now);
            console.log(date)
            data.push((Math.random() - 0.4) * 10 + data[data.length - 1]);

            if (shift) {
                date.shift();
                data.shift();
            }

            now = new Date(+new Date(now) + twoMinutes);
        }

        for (var i = 1; i < 10; i++) {
            addData();
        }

        option = {
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: date
            },
            yAxis: {
                boundaryGap: [0, '50%'],
                type: 'value'
            },
            series: [
                {
                    name:'成交',
                    type:'line',
                    smooth:true,
                    symbol: 'none',
                    stack: 'a',
                    areaStyle: {
                        normal: {}
                    },
                    data: data
                }
            ]
        };

        setInterval(function () {
            addData(true);
            myChart.setOption({
                xAxis: {
                    data: date
                },
                series: [{
                    name:'成交',
                    data: data
                }]
            });
        }, 10000);
        option1 = {
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            calculable : true,
            series : [
                {
                    name:'负荷',
                    type:'pie',
                    radius : [30, 110],
                    center : ['50%', '50%'],
                    roseType : 'area',
                    data:[
                        {value:10, name:'rose1'},
                        {value:5, name:'rose2'},
                        {value:15, name:'rose3'},
                        {value:25, name:'rose4'}
                    ]
                }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        myChart1.setOption(option1);
        // myChart2.setOption(option2);
        // myChart3.setOption(option3);
    }())
</script>