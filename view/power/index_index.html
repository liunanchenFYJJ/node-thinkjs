<!-- 内容主体区域 -->
<blockquote class="layui-elem-quote">
    运维总览,整体运维的总视图
</blockquote>
<!-- 利用 vue 实例进行数据绑定 -->
<div class="layui-tab" id="app">
    <ul class="layui-tab-title">
        <li class="layui-this">运维总览</li>
    </ul>
    <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
            <!-- 内容主体 -->
            <div class="layui-row">
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>平台工程总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon">&#xe62c;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>您的站点:</span><br>
                                    <span>在线子站:</span><br>
                                    <span>离线子站:</span><br>
                                    <span>检修子站:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>指标检测总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon">&#xe628;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>总指标数:</span><br>
                                    <span>设备指标数:</span><br>
                                    <span>运行指标:</span><br>
                                    <span>异常指标率:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>告警检测总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon">&#xe645;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>今日告警数:</span><br>
                                    <span>严重等级:</span><br>
                                    <span>普通等级:</span><br>
                                    <span>一般等级:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="layui-col-sm6 layui-col-md3">
                    <fieldset class="layui-elem-field">
                        <legend>待办事项总览</legend>
                        <div class="layui-field-box animation1">
                            <div class="layui-row">
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <i class="layui-icon">&#xe61d;</i>
                                </div>
                                <div class="layui-col-sm6 layui-col-xs12">
                                    <span>近期待办:</span><br>
                                    <span>紧急等级:</span><br>
                                    <span>普通等级:</span><br>
                                    <span>一般等级:</span>                                        
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-md8">
                    <fieldset class="layui-elem-field">
                        <legend>平台总流量趋势</legend>
                        <div class="layui-field-box">
                            <div id="total_fuhe_map"></div>
                        </div>
                    </fieldset>
                </div>               
                <div class="layui-col-md4">
                    <fieldset class="layui-elem-field">
                        <legend>站点负荷区间分布(kw)</legend>
                        <div class="layui-field-box">
                            <div id="fuhe_map"></div>
                        </div>
                    </fieldset>
                </div>               
            </div>
            <div class="layui-row">
                <div class="layui-col-sm6 layui-col-md6">
                    <fieldset class="layui-elem-field">
                        <legend>Top 10 用能站点</legend>
                        <div class="layui-field-box">
                            <div id="top_fuhe_map"></div>
                        </div>
                    </fieldset>
                </div>               
                <div class="layui-col-sm6 layui-col-md6">
                    <fieldset class="layui-elem-field">
                        <legend>平台用能趋势(kwh)</legend>
                        <div class="layui-field-box">
                            <div id="top_energy_map"></div>
                        </div>
                    </fieldset>
                </div> 
            </div>
            <div class="layui-row">
                <div class="layui-col-sm12 layui-col-md12">
                    <fieldset class="layui-elem-field">
                        <legend>重点站点服务检测|<a><i class="fa fa-plus-circle"></i></a>添加关注</legend>
                        <div class="layui-field-box">
                            <table class="layui-table">
                                <colgroup>
                                    <col width="150">
                                    <col width="200">
                                    <col>
                                </colgroup>
                                <thead>
                                    <tr>
                                    <th>操作</th>
                                    <th>子站名称</th>
                                    <th>企业名称</th>
                                    <th>所属行业</th>
                                    <th>装机容量(kVA)</th>
                                    <th>当前负荷(kW)</th>
                                    <th>最大负荷(kW)</th>
                                    <th>指标状态</th>
                                    <th>通信状态</th>
                                    </tr> 
                                </thead>
                                <tbody>
                                    <tr>
                                    <td>
                                        <div class="layui-btn-group">
                                            <button class="layui-btn layui-btn-sm">
                                                <i class="fa fa-line-chart"></i>
                                            </button>
                                            <button class="layui-btn layui-btn-sm">
                                                <i class="layui-icon">&#xe640;</i>
                                            </button>
                                        </div>
                                    </td>
                                    <td>普洛斯20kV变电站</td>
                                    <td>苏州普洛斯物流园</td>
                                    <td>服务行业</td>
                                    <td>1260</td>
                                    <td>314.56</td>
                                    <td>513.48</td>
                                    <td><i class="fa fa-dot-circle-o run"></i></td>
                                    <td><i class="fa fa-dot-circle-o run">在线</i></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </fieldset>
                </div> 
            </div>                
        </div>
    </div>
</div>
<script>
    (function(){
        // 利用vue进行数据绑定
        var vuedata = {
            projectslist: []
        }
        var app = new Vue({
            el: '#app',
            data: vuedata
        });
        // echarts图标初始化
        var myChart = echarts.init(document.getElementById('total_fuhe_map'));
        var myChart1 = echarts.init(document.getElementById('fuhe_map'));        
        // var myChart2 = echarts.init(document.getElementById('top_fuhe_map'));        
        // var myChart3 = echarts.init(document.getElementById('total_energy_map'));        
        
        var base = +new Date(2014, 9, 3);
        var oneDay = 24 * 3600 * 1000;
        var date = [];

        var data = [Math.random() * 150];
        var now = new Date(base);

        function addData(shift) {
            now = [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/');
            date.push(now);
            data.push((Math.random() - 0.4) * 10 + data[data.length - 1]);

            if (shift) {
                date.shift();
                data.shift();
            }

            now = new Date(+new Date(now) + oneDay);
        }

        for (var i = 1; i < 100; i++) {
            addData();
        }

        option = {
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: date
            },
            yAxis: {
                boundaryGap: [0, '50%'],
                type: 'value'
            },
            axisPointer: {
                show: true,
                snap: true
            },
            series: [
                {
                    name:'成交',
                    type:'line',
                    hoverAnimation:true,
                    smooth:true,
                    symbol: 'none',
                    stack: 'a',
                    areaStyle: {
                        normal: {}
                    },
                    data: data
                }
            ]
        };

        setInterval(function () {
            addData(true);
            myChart.setOption({
                xAxis: {
                    data: date
                },
                series: [{
                    name:'成交',
                    data: data
                }]
            });
        }, 500);

        option1 = {
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            calculable : true,
            series : [
                {
                    name:'负荷',
                    type:'pie',
                    radius : [30, 110],
                    center : ['50%', '50%'],
                    roseType : 'area',
                    data:[
                        {value:10, name:'rose1'},
                        {value:5, name:'rose2'},
                        {value:15, name:'rose3'},
                        {value:25, name:'rose4'},
                        {value:25, name:'rose5'},
                    ]
                }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        myChart1.setOption(option1);
        // myChart2.setOption(option2);
        // myChart3.setOption(option3);

        $.post('/power/map/getprojectlist', {}, function(e) {
            console.log(e.data);
        })
    })()
</script>
<style>
    i.layui-icon {
        font-size: 64px;
        color: rgb(30, 159, 255)
    }
    #total_fuhe_map, #fuhe_map, #top_fuhe_map, #top_energy_map {
        height: 240px;
        width: 100%
    }
</style>